<div class="root">
    <div class="row-spacer"></div>
    <div class="f-row">
        <lib-segment [optionsList]="optionsList" labelKey="label" valueKey="value"></lib-segment>
        <span class="f-spacer"></span>
        <lib-button-group>
            <lib-button type="minor" (click)="clearAllFilters()" i18n="@@reset_all">Reset all</lib-button>
            <lib-button type="minor" icon="times" (click)="close()"></lib-button>
            <!-- <lib-button type="minor" icon="times" iconPosition="before" (click)="close()" i18n="@@close"> close </lib-button> -->
          </lib-button-group>
    </div>
    <div class="row-spacer"></div>
    <div class="f-row system">
        <div class="f-col system-fields-col">
            <lib-search i18n-placeholder="@@search" placeholder="Search" (valueChange)="searchFieldSub.next($event)"></lib-search>
            <div class="row-spacer"></div>
            <mat-list class="filters-list">
                <mat-list-item class="f-row" *ngFor="let filter of suggestedFilters; let index=index">
                    <div class="f-col"
                        (click)="upsertFilter(filter.fieldId)">
                        <lib-text-line type="base"> {{ getFilterDescription(filter.fieldId) }}  </lib-text-line>
                        <lib-text-line type="base" textColor="secondary"> {{ getFilterValue(filter.fieldId) }} </lib-text-line>
                    </div>
                    <span class="f-spacer"></span>
                    <lib-button type="plain" iconFontType="solid" icon="times" 
                        (click)="removeFilter(index, filter.fieldId)"></lib-button>
                </mat-list-item>
            </mat-list>
            <lib-section></lib-section>

            <div class="f-row">
                <span class="col-spacer"></span>
                <lib-text-line type="base" weight="strong" textColor="secondary"><span i18n="@@apply_filters">Apply filters...</span></lib-text-line>
            </div>
            <mat-list class="fields-list"
                prosInfiniteScroll bufferPercentage="20" (scrollEnd)="getModuleFldMetadata(true)">
                <!-- Todo: hide already applied field filters -->
                <mat-list-item *ngFor="let field of moduleFieldsMetatdata"
                    (click)="upsertFilter(field.fieldId)">
                    {{ field.fieldDescri }}
                </mat-list-item>
            </mat-list>
        </div>
        <div class="col-spacer"></div>
        <div class="f-col system-values-col">
            <ng-template [ngIf]="activeFilter">
                <div class="f-row">
                    <lib-text-line type="base" weight="strong"> {{ getFieldDescription(activeFilter.fieldId) }} </lib-text-line>
                    <span class="f-spacer"></span>
                    <lib-button type="type">
                        <mat-icon fontSet="mdo-icons-solid">sliders-h</mat-icon>
                    </lib-button>
                    <lib-button-group>
                        <lib-button type="major" (click)="applyFilter()" i18n="@@apply">Apply</lib-button>
                        <lib-button type="major" icon="ellipsis-h"></lib-button>
                    </lib-button-group>
                </div>
                <div class="row-spacer"></div>
                <div class="f-col">
                    <ng-container [ngSwitch]="getFieldControlType(activeFilter.fieldId)">
                        <!-- Text, Password, Email -->
                        <lib-input *ngSwitchCase="[FieldControlType.TEXT, FieldControlType.EMAIL, FieldControlType.PASSWORD].includes(getFieldControlType(activeFilter.fieldId)) ? getFieldControlType(activeFilter.fieldId): !getFieldControlType(activeFilter.fieldId) "
                            i18n-placeholder="@@type_filter_value" placeholder="type filter value" [value]="activeFilter.values ? activeFilter.values.toString() : ''"
                            (valueChange)="updateFilterValue($event)"></lib-input>

                        <!-- Input type number -->
                        <lib-range-slider *ngSwitchCase="FieldControlType.NUMBER"
                            thumbLabel
                            [value]="activeFilter.startValue || 0" [highValue]="activeFilter.endValue || 1"
                            (valueChange)="updateFilterValue($event)"></lib-range-slider>

                        <!-- Default input text -->
                        <lib-input *ngSwitchDefault i18n-placeholder="@@type_filter_value" placeholder="type filter value" [value]="activeFilter.values ? activeFilter.values.toString() : ''"
                            (valueChange)="updateFilterValue($event)"></lib-input>
                    </ng-container>
                </div>
            </ng-template>  
            
            <!-- Location Tab -->
        <!-- <ng-template> -->
            <div class="f-row">
                <lib-text-line type="base" weight="strong">Location</lib-text-line>
                <span class="f-spacer"></span>
                <lib-button type="type" libBadge="322" [matBadgeOverlap]="true">
                    <mat-icon fontSet="mdo-icons-solid">sliders-h</mat-icon>
                </lib-button>
                <span class="f-col-spacer-half"></span>
                <lib-button-group>
                    <lib-button type="major">Apply</lib-button>
                    <lib-button type="major" icon="ellipsis-h"></lib-button>
                </lib-button-group>
            </div>
            <div class="f-row-spacer-half"></div>
            <div class="f-col">
                <lib-text-line type="base" weight="strong">Rule</lib-text-line>
                <lib-segment [optionsList]="rulelist" labelKey="label" valueKey="value"></lib-segment>

                <lib-section></lib-section>

                <lib-search placeholder="Search"></lib-search>
                <div class="row-spacer"></div>
                <div class="f-row">
                    <span class="col-spacer"></span>
                    <lib-slide-toggle label="Show selected" labelPosition="after" theme="primary">
                    </lib-slide-toggle>
                </div>
                <div class="row-spacer"></div>
                <mat-list>
                    <mat-list-item>
                        <lib-checkbox label="Select all" labelPosition="after" theme="primary"></lib-checkbox>
                    </mat-list-item>
                    <ng-template>
                        <div class="f-row">
                            <span class="col-spacer"></span>
                            <lib-button type="plain" iconFontType="solid" icon="times"></lib-button>
                            <span class="f-col-spacer-half"></span>
                            <lib-text-line type="base">Remove all</lib-text-line>
                        </div>
                    </ng-template>
                    <lib-section></lib-section>
                    <mat-list-item>
                        <lib-checkbox label="Algeria" labelPosition="after" theme="primary"></lib-checkbox>
                    </mat-list-item>
                    <mat-list-item>
                        <lib-checkbox label="America" labelPosition="after" theme="primary"></lib-checkbox>
                    </mat-list-item>
                    <mat-list-item>
                        <lib-checkbox label="Austria" labelPosition="after" theme="primary"></lib-checkbox>
                    </mat-list-item>
                    <mat-list-item>
                        <lib-checkbox label="Brussels" labelPosition="after" theme="primary"></lib-checkbox>
                    </mat-list-item>
                    <mat-list-item>
                        <lib-checkbox label="France" labelPosition="after" theme="primary"></lib-checkbox>
                    </mat-list-item>
                    <mat-list-item>
                        <lib-checkbox label="Germany" labelPosition="after" theme="primary"></lib-checkbox>
                    </mat-list-item>
                </mat-list>
            </div>
        <!-- </ng-template> -->

        <!-- Approved date Tab -->
        <ng-template>
            <div class="f-row">
                <lib-text-line type="base" weight="strong">Approved date</lib-text-line>
                <span class="f-spacer"></span>
                <lib-button type="type">
                    <mat-icon fontSet="mdo-icons-solid">sliders-h</mat-icon>
                </lib-button>
                <span class="f-col-spacer-half"></span>
                <lib-button-group>
                    <lib-button type="major">Apply</lib-button>
                    <lib-button type="major" icon="ellipsis-h"></lib-button>
                </lib-button-group>
            </div>
            <div class="f-row-spacer-half"></div>
            <div class="f-row system">
                <div class="f-col date-list">
                    <mat-list>
                        <mat-list-item>
                            <lib-text-line type="base">Day</lib-text-line>
                            <span class="f-spacer"></span>
                            <mat-icon fontSet="mdo-icons-solid">long-arrow-alt-right</mat-icon>
                        </mat-list-item>
                        <mat-list-item>
                            <lib-text-line type="base">Week</lib-text-line>
                            <span class="f-spacer"></span>
                            <mat-icon fontSet="mdo-icons-solid">long-arrow-alt-right</mat-icon>
                        </mat-list-item>
                        <mat-list-item>
                            <lib-text-line type="base">Month</lib-text-line>
                            <span class="f-spacer"></span>
                            <mat-icon fontSet="mdo-icons-solid">long-arrow-alt-right</mat-icon>
                        </mat-list-item>
                        <mat-list-item>
                            <lib-text-line type="base">Quarter</lib-text-line>
                            <span class="f-spacer"></span>
                            <mat-icon fontSet="mdo-icons-solid">long-arrow-alt-right</mat-icon>
                        </mat-list-item>
                        <mat-list-item>
                            <lib-text-line type="base">Year</lib-text-line>
                            <span class="f-spacer"></span>
                            <mat-icon fontSet="mdo-icons-solid">long-arrow-alt-right</mat-icon>
                        </mat-list-item>
                        <mat-list-item>
                            <lib-text-line type="base">Specific date </lib-text-line>
                            <span class="f-spacer"></span>
                            <mat-icon fontSet="mdo-icons-solid">long-arrow-alt-right</mat-icon>
                        </mat-list-item>
                        <mat-list-item>
                            <lib-text-line type="base">Date range</lib-text-line>
                            <span class="f-spacer"></span>
                            <mat-icon fontSet="mdo-icons-solid">long-arrow-alt-right</mat-icon>
                        </mat-list-item>

                    </mat-list>
                </div>
                <div class="col-spacer"></div>
                <div class="f-col date-list">
                    <lib-radio-group [options]="options" layout="vertical"></lib-radio-group>
                </div>
            </div>
        </ng-template>

        <!-- Period Tab -->
        <ng-template>
            <div class="f-row">
                <lib-text-line type="base" weight="strong">Period</lib-text-line>
                <span class="f-spacer"></span>
                <span class="f-col-spacer-half"></span>
                <lib-button type="minor">Save</lib-button>
            </div>
            <div class="f-row-spacer-half"></div>
            <div class="f-row system">
                <div class="f-col date-list">
                    <lib-radio-group [options]="periods" layout="vertical"></lib-radio-group>
                </div>
            </div>
        </ng-template>

        <!-- Numeric Range Tab -->
        <ng-template>
            <div class="f-row">
                <lib-text-line type="base" weight="strong">Range</lib-text-line>
                <span class="f-spacer"></span>
                <lib-button type="type">
                    <mat-icon fontSet="mdo-icons-solid">sliders-h</mat-icon>
                </lib-button>
                <span class="f-col-spacer-half"></span>
                <lib-button type="minor">Save</lib-button>
            </div>
            <div class="f-row-spacer-half"></div>
            <div class="f-row system">
                <div class="f-col date-list">
                    <lib-input></lib-input>
                    <lib-range-slider value="12"></lib-range-slider>
                </div>
            </div>
        </ng-template>

        <!-- Selectdropdown Tab -->
        <ng-template>
            <div class="f-col system-values-col">
                <div class="f-row">
                    <lib-input placeholder="Select range"></lib-input>
                    <!-- <mat-menu #selectOptions="matMenu">
                        <lib-range-slider value="12"></lib-range-slider>
                    </mat-menu> -->
                </div>
            </div>
        </ng-template>
        
        </div>
    </div>
</div>
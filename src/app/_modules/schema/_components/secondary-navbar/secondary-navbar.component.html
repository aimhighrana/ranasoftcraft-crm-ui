<div class="root">
  <mat-card class="secondary-card mat-elevation-z0">
    <div class="row-spacer"></div>
    <div class="f-row display-heading-large">
        <div>{{ getRoutedDescription }}</div>
      <span class="f-spacer"></span>
      <button mat-button (click)="globalCreate()">
        <mat-icon>add</mat-icon>
      </button>
    </div>
    <div class="row-spacer"></div>

    <pros-search-input [placeholder]="'Search Schema'"></pros-search-input>

    <div class="row-spacer"></div>

    <div class="nav-tree">
      <mat-accordion *ngIf="activatedPrimaryNav === 'welcome'">
        <ng-container *ngFor="let module of dataIntillegences">
          <ng-template [ngIf]="module.variants && module.variants.length >0" [ngIfElse]="noVarinats">
            <mat-expansion-panel togglePosition="before" class="mat-elevation-z0">
              <mat-expansion-panel-header expandedHeight="48px" collapsedHeight="48px">
                <mat-panel-title>
                  <div class="expand-title">
                    {{ module.schemaDescription ? module.schemaDescription : 'Untitled' }}
                  </div>
                  <span class="f-spacer"></span>
                  <div class="badge"> {{ module.variants.length }} </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <mat-nav-list role="navigation">
                <mat-list-item *ngFor="let variant of module.variants"
                  [routerLink]="['schema/schema-details', module.moduleId, module.schemaId,variant.variantId]"
                  [routerLinkActive]="'selected'">
                  <div mat-line>
                    {{ variant.variantName ? variant.variantName : 'Untitled' }}
                  </div>
                </mat-list-item>
              </mat-nav-list>
            </mat-expansion-panel>
          </ng-template>

          <ng-template #noVarinats>
            <mat-expansion-panel togglePosition="before" class="mat-elevation-z0" hideToggle
              [routerLink]="['schema/schema-details', module.moduleId, module.schemaId,0]"
              [routerLinkActive]="'selected'">
              <mat-expansion-panel-header expandedHeight="48px" collapsedHeight="48px">
                <mat-panel-title>
                  <div class="expand-title">
                    {{ module.schemaDescription ? module.schemaDescription : 'Untitled'  }}
                  </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
            </mat-expansion-panel>
          </ng-template>

        </ng-container>
      </mat-accordion>
      <mat-accordion *ngIf="activatedPrimaryNav === 'schema'">
        <div class="section-header">
          Data intelligence
        </div>
        <div class="row-spacer"></div>
        <ng-container *ngFor="let module of moduleList">
          <mat-expansion-panel togglePosition="before" class="mat-elevation-z0"
            *ngIf="module.schemaLists && module.schemaLists.length>0">
            <mat-expansion-panel-header expandedHeight="48px" collapsedHeight="48px" [routerLink]="['schema', module.moduleId]">
              <mat-panel-title>
                <div class="expand-title">{{module.moduleDesc ? module.moduleDesc : 'Untitled'}}</div>
                <span class="f-spacer"></span>
                <div class="badge">{{module.schemaLists.length}}</div>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-nav-list role="navigation">
              <mat-list-item *ngFor="let schema of module.schemaLists" [routerLink]="['schema/schema-info', schema.moduleId, schema.schemaId]" [queryParams]="{fragment:'business-rules'}">
                <div mat-line>{{schema.schemaDescription ?  schema.schemaDescription : 'Untitled'}}</div>
              </mat-list-item>
            </mat-nav-list>
          </mat-expansion-panel>
        </ng-container>
      </mat-accordion>
    </div>
  </mat-card>

  <div class="split-col mat-elevation-z1" (click)="toggleSideBar()">
    <mat-icon class="split-arrow">{{arrowIcon}}</mat-icon>
  </div>
</div>
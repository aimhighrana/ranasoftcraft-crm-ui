<div class="root">
  <div class="breadcrumb-wrapper">
    <pros-breadcrumb [crumbs]="breadcrumb"></pros-breadcrumb>
  </div>
  <mat-card>
    <div class="row">
      <mat-form-field>
        <input matInput placeholder="Schema Group Name" [formControl]="groupNameFrmCtrl">
      </mat-form-field>  
      <span class="col-spacer"></span>
      <mat-form-field class="field-x2">
        <mat-chip-list #chipList aria-label="Module selection">
          <mat-chip *ngFor="let module of groupDetails.objectId" [selectable]="'true'"
            [removable]="'true'"
            (removed)="remove(module)">
            {{displayObjectDescription(module)}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>
          <input
            placeholder="Select modules"
            #moduleSearchInp
            [formControl]="moduleInpCtrl"
            [matAutocomplete]="auto"
            [matChipInputFor]="chipList"
            [matChipInputAddOnBlur]="'true'"
            (matChipInputTokenEnd)="add($event)">
        </mat-chip-list>
        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn" (optionSelected)="selected($event)">
          <mat-option *ngFor="let module of filteredModules | async" [value]="module">
            {{module.objectdesc}}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

    </div>  

    <div class="row">
      <mat-form-field>
        <input matInput placeholder="Search for schemas" [formControl]="searchLodedSchemaCtrl">
      </mat-form-field>  
    </div>

    <div class="row content">
      <mat-card *ngFor ="let schema of schemaListObservable | async">
        <mat-checkbox color="primary" (change)="manageSelectedSchemas($event,schema.schemaId);" [checked]="schema.isSelected">
          <label class="tilelabel">{{schema.discription}}</label>
        </mat-checkbox>      
      </mat-card>      
    </div>

    <div class="row nullstate" *ngIf="showNullState">
      <button mat-fab disabled>
        <mat-icon color="primary">layers_clear</mat-icon>
      </button>
      <p>Please select at least one module </p>
    </div>

    <div class="row">
      <button mat-button (click)="resetFields()">Discard</button>
      <button mat-flat-button color="primary" (click)="saveSchemaGroup()">Save Changes</button>
    </div>

  </mat-card>
</div>

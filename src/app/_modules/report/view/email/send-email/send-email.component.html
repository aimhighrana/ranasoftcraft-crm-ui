<div class="root">
    <form [formGroup]="emailFormGrp">
        <div class="f-row breadcrum-toolbar">
            <lib-button type="plain" (click)="close()" iconFontType="light" icon="times"></lib-button>
            <div class="col-spacer"></div>
            <div class="f-col mdo-constrained-right">
                <div class="f-row breadcrum-head">
                    <div class="display-heading-large" i18n="@@send_via_email">
                        Send via email
                    </div>
                    <span class="f-col-spacer-half"></span>
                    <span class="f-spacer"></span>
                    <lib-button type="major" (click)="selectTemplate()" i18n="@@select_template">Select a template</lib-button>
                    <span class="f-col-spacer-half"></span>
                    <lib-button type="major" (click)="sendEmail()"  i18n="@@send">Send</lib-button>

                </div>
            </div>
        </div>
        <div class="f-col sidesheetcontent-listing">
            <div class="f-col mdo-justify">
                <div class="f-col">
                    <div class="f-col mdo-form-field">
                         <!-- Multiselect -->
                        <mat-label  i18n="@@send_to">Send to</mat-label>
                        <mat-form-field appearance="outline">
                            <mat-chip-list #chipList aria-label="User selection">
                                <mat-chip
                                    *ngFor="let user of emailRecipients"
                                    [selectable]="selectable"
                                    [removable]="removable"
                                    (removed)="remove(user)">
                                    {{user}}
                                    <mat-icon matChipRemove>cancel</mat-icon>
                                </mat-chip>
                                <input
                                required
                                placeholder="Search users..."
                                #userInput
                                [formControl]="emailTo"
                                [matAutocomplete]="auto"
                                [matChipInputFor]="chipList"
                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                [matChipInputAddOnBlur]="addOnBlur"
                                (matChipInputTokenEnd)="add($event)">
                            </mat-chip-list>
                            <mat-autocomplete #auto="matAutocomplete"
                            (optionSelected)="selectUser($event)">
                                <mat-option [value]="user.fullName" *ngFor="let user of filteredUsers | async">
                                    {{user.email}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                         <!-- Multiselect -->
                        <mat-error *ngIf="emailTo.touched && emailTo.hasError('email')">Email is invalid</mat-error>
                        <mat-error *ngIf="emailTo.touched && emailTo.hasError('required') && emailRecipients.length == 0">Email is required</mat-error>
                        <div mat-line><a class="info-link" (click)=addMyself()>Add myself</a></div>
                    </div>
                    <div class="f-col mdo-form-field">
                        <lib-input i18n-label="@@subject" label="Subject" [type]="'text'" placeholder="Subject"
                        formControlName="subject"></lib-input>
                    </div>
                    <div class="f-col mdo-form-field">
                        <lib-textarea i18n-label="@@message" label="Message" [type]="'text'" [rows]="5"
                            placeholder="Message" formControlName="message"></lib-textarea>
                    </div>
                    <div class="f-col mdo-form-field">
                        <mat-label i18n="@@attachment_format">Attachment format</mat-label>
                        <lib-button-group>
                            <lib-button type="minor" i18n="@@pdf">PDF</lib-button>
                            <lib-button type="minor" i18n="@@ppt">PPT</lib-button>
                        </lib-button-group>
                    </div>
                </div>
            </div>
        </div>
    </form>

</div>
<!-- transformation rule start -->
<form [formGroup]="form" class="root">
        <div class="mdo-form-field">
            <mat-label>Source field</mat-label>
            <mat-form-field appearance="outline">
                <mat-chip-list #sourceChips>
                    <mat-chip *ngIf="selectedSourceField" [removable]="true"
                        (removed)="removeSourceField()">
                        {{selectedSourceField[sourceFieldsObject.labelKey]}}
                        <mat-icon matChipRemove>cancel</mat-icon>
                    </mat-chip>
                    <input matInput class="mat-input" #sourceFieldInput [matAutocomplete]="autoSource" formControlName="sourceFld"
                        [matChipInputFor]="sourceChips" [matChipInputSeparatorKeyCodes]="separatorKeysCodes">
                </mat-chip-list>
                <mat-autocomplete #autoSource="matAutocomplete" [displayWith]="displayFnSource.bind(this)"
                    (optionSelected)="selectSourceField($event)">
                    <mat-option *ngFor="let fieldItem of filteredSourceFields | async"
                        [value]="fieldItem[sourceFieldsObject.valueKey]">
                        {{fieldItem[sourceFieldsObject.labelKey]}}
                    </mat-option>
                </mat-autocomplete>


            </mat-form-field>
            <mat-error *ngIf="submitted && selectedTargetFields.length === 0">
                Please select the target fields
            </mat-error>
        </div>

        <div class="mdo-form-field">
            <mat-label>Target fields</mat-label>
            <mat-form-field appearance="outline">
                <mat-chip-list #targetChips>
                    <mat-chip *ngFor="let field of selectedTargetFields;let i = index" [removable]="true"
                        (removed)="removeTargetField(i)">
                        {{field[targetFieldsObject.labelKey]}}
                        <mat-icon matChipRemove>cancel</mat-icon>
                    </mat-chip>
                    <input matInput class="mat-input" #targetFieldInput [matAutocomplete]="autoTarget" formControlName="targetFld"
                        [matChipInputFor]="targetChips" [matChipInputSeparatorKeyCodes]="separatorKeysCodes">
                </mat-chip-list>
                <mat-autocomplete #autoTarget="matAutocomplete" [displayWith]="displayFnTarget.bind(this)"
                    (optionSelected)="selectTargetField($event)">
                    <mat-option *ngFor="let fieldItem of filteredTargetFields | async"
                        [value]="fieldItem[targetFieldsObject.valueKey]">
                        {{fieldItem[targetFieldsObject.labelKey]}}
                    </mat-option>
                </mat-autocomplete>


            </mat-form-field>
            <mat-error *ngIf="submitted && selectedTargetFields.length === 0">
                Please select the target fields
            </mat-error>
        </div>

        <div class="mdo-form-field">
            <lib-input label="Exclude script (Regex)" formControlName="excludeScript" [value]="form.value.excludeScript"></lib-input>
        </div>
        <div class="mdo-form-field">
            <lib-input label="Include script (Regex)" formControlName="includeScript" [value]="form.value.includeScript"></lib-input>
        </div>
</form>
<!-- transformation rule end -->
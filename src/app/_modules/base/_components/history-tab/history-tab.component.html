<mat-card class="mat-elevation-z0 history-container">
    <mat-card-content>
        <div class="f-row history-actions">
            <span class="f-spacer"></span>
            <button mat-button color="primary">
                <mat-icon>get_app</mat-icon> Download
            </button>
        </div>

        <mat-card class="mat-elevation-z0 summary-datarows" *ngFor="let log of auditLogData">
            <div class="f-row">

                <mat-card class="mat-elevation-z2 data-tile">
                    <div class="f-row data-topaction">
                        <h4 class="mat-h4">{{log.stepDetails.stepText}}</h4>
                        <span class="f-spacer"></span>
                        <span class="col-spacer"></span>
                        <mat-chip-list>
                            <mat-chip color="primary" selected>{{statusFromShortCode(log.stepDetails.status)}}
                            </mat-chip>
                        </mat-chip-list>
                    </div>

                    <mat-grid-list cols="2" rowHeight="40px" class="summary-grid">
                        <mat-grid-tile>
                            <div class="f-col">
                                <mat-label>User</mat-label>
                                <span class="value-row">{{log.stepDetails.user}}</span>
                            </div>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <div class="f-col">
                                <mat-label>SLA Hours</mat-label>
                                <span class="value-row">{{log.stepDetails.slaHours || 0 }} Hour(s) </span>
                            </div>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <div class="f-col">
                                <mat-label>Role</mat-label>
                                <span class="value-row">{{log.stepDetails.role}}</span>
                            </div>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <div class="f-col">
                                <mat-label>Recieved On</mat-label>
                                <span class="value-row">{{log.stepDetails.receivedOn}}</span>
                            </div>
                        </mat-grid-tile>
                    </mat-grid-list>


                    <mat-grid-list cols="2" rowHeight="40px" class="summary-grid">
                        <mat-grid-tile>
                        </mat-grid-tile>
                        <mat-grid-tile>
                            <div class="f-col">
                                <mat-label>Auctioned on</mat-label>
                                <span class="value-row">{{log.stepDetails.actionedOn}} </span>
                            </div>
                        </mat-grid-tile>

                    </mat-grid-list>

                    <div class="row">
                        <!-- <button mat-button color="primary">View More Details <mat-icon>keyboard_arrow_down</mat-icon>
                        </button> -->

                        <mat-accordion #accordion="matAccordion">
                            <mat-expansion-panel (opened)="getChangeLogs(log.taskId,log.stepDetails.user)">
                                <mat-expansion-panel-header color="primary">
                                    <mat-panel-title>
                                        View More Details
                                    </mat-panel-title>
                                </mat-expansion-panel-header>

                                <mat-grid-list cols="1" rowHeight="40px" class="summary-grid">
                                    <div *ngFor="let field of activeMoreLogs">
                                        <mat-grid-tile>
                                            <div class="f-col">
                                                <mat-label>Description</mat-label>
                                                <span class="value-row">{{field.labelDescription}}</span>
                                            </div>
                                            <div class="f-col" *ngFor="let keyField of field.keyFields;let i = index">
                                                <mat-label>{{keyField}} {{i}}</mat-label>

                                                <div class="f-col" *ngFor="let field of field.fields[i];let j = index">
                                                    <span class="value-row">
                                                        <s>{{field.logValues.oldValue}}</s>|
                                                        {{field.logValues.newValue}}
                                                    </span>
                                                </div>
                                            </div>

                                        </mat-grid-tile>
                                    </div>
                                </mat-grid-list>
                                 

                            </mat-expansion-panel>
                        </mat-accordion>
                    </div>
                </mat-card>
            </div>
        </mat-card>

    </mat-card-content>
</mat-card>
<lib-text-line type="headline" i18n="@@profile">Profile</lib-text-line>
<div class="row-spacer"></div>
<lib-tab-group disableRipple="true">
    <lib-tab label="Personal Details" i18n-label="@@personal_details">
        <div class="row-spacer"></div>
        <lib-banner *ngIf="formErrMsg" [text]="formErrMsg" status="error"></lib-banner>
        <div class="f-row tabs-content">
            <div class="avatar">
                <lib-avatar size="large"></lib-avatar>
            </div>
            <form [formGroup]="settingsForm">
                <div class="entry-fields">
                    <lib-input label="Username" i18n-label="@@username" formControlName="userName" type="text">
                    </lib-input>
                    <lib-input label="Full Name" i18n-label="@@full_name" formControlName="fullName" type="text"
                        [isRequired]="true" (afterBlur)="submitForm()" (click)="updateForm = false"
                        [hint]="(settingsForm.controls.fullName.touched && settingsForm.controls.fullName.errors && settingsForm.controls.fullName.errors.required) ? 'This is a required field' : ''"
                        [hasError]="settingsForm.controls.fullName.touched && settingsForm.controls.fullName.errors && settingsForm.controls.fullName.errors.required">
                    </lib-input>
                    <lib-input label="Preferred Name" i18n-label="@@preferred_name" formControlName="preferredName"
                        type="text" [isRequired]="true" (afterBlur)="submitForm()" (click)="updateForm = false"
                        [hint]="(settingsForm.controls.preferredName.touched && settingsForm.controls.preferredName.errors && settingsForm.controls.preferredName.errors.required) ? 'This is a required field' : ''"
                        [hasError]="settingsForm.controls.preferredName.touched && settingsForm.controls.preferredName.errors && settingsForm.controls.preferredName.errors.required">
                    </lib-input>
                    <lib-input label="Phone Number" i18n-label="@@phone_number" formControlName="phone" type="number"
                        [isRequired]="true" (afterBlur)="submitForm()" (click)="updateForm = false"
                        [hint]="(settingsForm.controls.phone.touched && settingsForm.controls.phone.errors && settingsForm.controls.phone.errors.required) ? 'This is a required field' : ''"
                        [hasError]="settingsForm.controls.phone.touched && settingsForm.controls.phone.errors && settingsForm.controls.phone.errors.required">
                    </lib-input>
                    <lib-input label="Primary Email Address" i18n-label="@@primary_email_address"
                        formControlName="primaryEmail" type="email" [isRequired]="true" (afterBlur)="submitForm()"
                        (click)="updateForm = false"
                        [hint]="(settingsForm.controls.primaryEmail.touched && settingsForm.controls.primaryEmail.errors && settingsForm.controls.primaryEmail.errors.required) ? 'This is a required field' : ((settingsForm.controls.primaryEmail.touched && settingsForm.controls.primaryEmail.errors && settingsForm.controls.primaryEmail.errors.email) ? 'Please Enter Valid Email' : '')"
                        [hasError]="(settingsForm.controls.primaryEmail.touched && settingsForm.controls.primaryEmail.errors && settingsForm.controls.primaryEmail.errors.required) || (settingsForm.controls.primaryEmail.touched && settingsForm.controls.primaryEmail.errors && settingsForm.controls.primaryEmail.errors.email)">
                    </lib-input>
                    <lib-input label="Secondary Email Address" i18n-label="@@secondary_email_address"
                        formControlName="secondaryEmail" type="email" (afterBlur)="submitForm()"
                        (click)="updateForm = false"
                        [hint]="(settingsForm.controls.secondaryEmail.touched && settingsForm.controls.secondaryEmail.errors && settingsForm.controls.secondaryEmail.errors.email) ? 'Please Enter Valid Email' : ''"
                        [hasError]="settingsForm.controls.secondaryEmail.touched && settingsForm.controls.secondaryEmail.errors && settingsForm.controls.secondaryEmail.errors.email">
                    </lib-input>
                    <lib-button-group>
                        <lib-button type="minor" i18n="@@change_password" (afterClick)="openChangePasswordDialog()">Change Password</lib-button>
                        <lib-button type="minor" i18n="@@digital_signature">Digital Signature</lib-button>
                    </lib-button-group>
                </div>
            </form>
        </div>
    </lib-tab>
    <lib-tab label="Language & format" i18n-label="@@language_format">
        <lib-banner *ngIf="langFormErrMsg" [text]="langFormErrMsg" status="error"></lib-banner>
        <form [formGroup]="languageSettingsForm">
            <!-------------Language--------------->
            <div class="f-col mdo-field">
                <!-- label -->
                <mat-label class="mdo-field-label" i18n="@@language">Language</mat-label>
                <!-- input container -->
                <div class="mdo-field-input">
                    <input matInput placeholder="Type to search" i18n-placeholder="@@type_to_search" formControlName="language" [matAutocomplete]="lang" (blur)="updateLanguageSettings('language')"/>
                    <mat-icon matSuffix fontSet="mdo-icons">{{ getDropdownPos(lang) }}</mat-icon>
                    <!-- autocomplete -->
                    <mat-autocomplete class="mdo-autocomplete" #lang>
                        <mat-option class="mdo-option" *ngFor="let opt of filteredLangList | async" [value]="opt">
                            {{opt}}
                        </mat-option>
                    </mat-autocomplete>
                </div>
            </div>

            <!-------------Time Zone--------------->
            <div class="f-col mdo-field">
                <!-- label -->
                <mat-label class="mdo-field-label" i18n="@@timezone">Time Zone</mat-label>
                <!-- input container -->
                <div class="mdo-field-input">
                    <input matInput placeholder="Type to search" i18n-placeholder="@@type_to_search" formControlName="timeZone" [matAutocomplete]="timeZone" (blur)="updateLanguageSettings('timeZone')"/>
                    <mat-icon matSuffix fontSet="mdo-icons">{{ getDropdownPos(timeZone) }}</mat-icon>
                    <!-- autocomplete -->
                    <mat-autocomplete class="mdo-autocomplete" #timeZone>
                        <mat-option class="mdo-option" *ngFor="let opt of filteredTimeZoneList | async" [value]="opt">
                            {{opt}}
                        </mat-option>
                    </mat-autocomplete>
                </div>
            </div>

            <!-------------Date format--------------->
            <div class="f-col mdo-field">
                <!-- label -->
                <mat-label class="mdo-field-label" i18n="date_format">Date format</mat-label>
                <!-- input container -->
                <div class="mdo-field-input">
                    <input matInput placeholder="Type to search" i18n-placeholder="@@type_to_search" formControlName="dateFormat" [matAutocomplete]="dateFormat" (blur)="updateLanguageSettings('dateFormat')"/>
                    <mat-icon matSuffix fontSet="mdo-icons">{{ getDropdownPos(dateFormat) }}</mat-icon>
                    <!-- autocomplete -->
                    <mat-autocomplete class="mdo-autocomplete" #dateFormat>
                        <mat-option class="mdo-option" *ngFor="let opt of filteredDateFormatList | async" [value]="opt">
                            {{opt}}
                        </mat-option>
                    </mat-autocomplete>
                </div>
            </div>

            <!-------------Time format--------------->
            <div class="f-col mdo-field">
                <!-- label -->
                <mat-label class="mdo-field-label" i18n="time_format">Time format</mat-label>
                <!-- input container -->
                <div class="mdo-field-input">
                    <input matInput placeholder="Type to search" i18n-placeholder="@@type_to_search" formControlName="timeFormat" [matAutocomplete]="timeFormat" (blur)="updateLanguageSettings('timeFormat')"/>
                    <mat-icon matSuffix fontSet="mdo-icons">{{ getDropdownPos(timeFormat) }}</mat-icon>
                    <!-- autocomplete -->
                    <mat-autocomplete class="mdo-autocomplete" #timeFormat>
                        <mat-option class="mdo-option" *ngFor="let opt of filteredTimeFormatList | async" [value]="opt">
                            {{opt}}
                        </mat-option>
                    </mat-autocomplete>
                </div>
            </div>

            <!-------------Number format--------------->
            <div class="f-col mdo-field">
                <!-- label -->
                <mat-label class="mdo-field-label" i18n="@@number_format">Number format</mat-label>
                <!-- input container -->
                <div class="mdo-field-input">
                    <input matInput placeholder="Type to search" i18n-placeholder="@@type_to_search" formControlName="numberFormat" [matAutocomplete]="numFormat" (blur)="updateLanguageSettings('numberFormat')"/>
                    <mat-icon matSuffix fontSet="mdo-icons">{{ getDropdownPos(numFormat) }}</mat-icon>
                    <!-- autocomplete -->
                    <mat-autocomplete class="mdo-autocomplete" #numFormat>
                        <mat-option class="mdo-option" *ngFor="let opt of filteredNumberFormatList | async" [value]="opt">
                            {{opt}}
                        </mat-option>
                    </mat-autocomplete>
                </div>
            </div>
        </form>
    </lib-tab>
    <lib-tab label="Working hours">
        Content 3
    </lib-tab>
</lib-tab-group>

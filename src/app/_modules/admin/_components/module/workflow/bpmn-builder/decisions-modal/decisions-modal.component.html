<h2 mat-dialog-title> Recipient {{data.recipient.value}} decisions configuration </h2>
<mat-divider></mat-divider>
<mat-dialog-content>
    <mat-card>
        <mat-card-subtitle> Fields configuration </mat-card-subtitle>
        <form [formGroup]="decisionForm">
            <ng-container *ngFor="let field of data.fields" [ngSwitch]="field.picklist">

                <mat-form-field *ngSwitchCase="FIELD_TYPE.Input" appearance="outline">
                    <mat-label> {{ field.label }}</mat-label>
                    <input matInput [formControlName]="field.id">
                </mat-form-field>

                <mat-form-field *ngSwitchCase="FIELD_TYPE.Select" appearance="outline">
                    <mat-label> {{ field.label }}</mat-label>
                    <input type="text" placeholder="Select value" aria-label="Number" matInput
                        [matAutocomplete]="selectValue" [formControlName]="field.id">
                    <mat-icon matSuffix>search</mat-icon>
                    <mat-autocomplete #selectValue="matAutocomplete" [displayWith]="getOptionText">
                        <mat-option *ngFor="let option of field.filteredOptions | async" [value]="option">
                            {{option.TEXT}}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>

                <mat-form-field *ngSwitchDefault appearance="outline">
                    <mat-label> {{ field.label }}</mat-label>
                    <input matInput [formControlName]="field.id">
                </mat-form-field>
                
            </ng-container>
        </form>
    </mat-card>
</mat-dialog-content>
<div mat-dialog-actions align="end">
    <button mat-button (click)="onCancelClick()">Cancel</button>
    <button mat-button [mat-dialog-close]="decisionForm.value" cdkFocusInitial>Ok</button>
</div>